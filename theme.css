/* ==========================================
   MASTER THEME FILE - SINGLE SOURCE OF TRUTH
   ========================================== */

/* This is the definitive design system for the entire application.
   All colors, spacing, fonts, and design tokens are defined here.
   No component should define its own styling values. */

:root {
  /* ==========================================
     DYNAMIC SEMANTIC COLORS - User Customizable
     ========================================== */
  
  /* PRIMARY ACTION COLOR - Used for primary buttons, active navigation, main CTAs */
  --color-action: #0D9488; /* Teal - Default */
  --color-action-hover: #0F766E; /* 10% darker */
  --color-action-text: #FFFFFF; /* White text on action color */
  --color-action-rgb: 13, 148, 136; /* RGB channels for rgba() usage */
  
  /* ACTIVITY/WORKOUT COLOR - Used for workout stats, progress, fitness features */
  --color-activity: #EC4899; /* Pink - Default */
  --color-activity-hover: #DB2777; /* 10% darker */
  --color-activity-text: #FFFFFF; /* White text on activity color */
  --color-activity-rgb: 236, 72, 153; /* RGB channels for rgba() usage */
  
  /* NUTRITION COLOR - Used for calorie tracking, food logging, nutrition features */
  --color-nutrition: #10B981; /* Green - Default */
  --color-nutrition-hover: #059669; /* 10% darker */
  --color-nutrition-text: #FFFFFF; /* White text on nutrition color */
  --color-nutrition-rgb: 16, 185, 129; /* RGB channels for rgba() usage */
  
  /* WELLNESS COLOR - Used for meditation, mood, mental health features */
  --color-wellness: #4F46E5; /* Indigo - Default */
  --color-wellness-hover: #4338CA; /* 10% darker */
  --color-wellness-text: #FFFFFF; /* White text on wellness color */
  --color-wellness-rgb: 79, 70, 229; /* RGB channels for rgba() usage */

  /* ==========================================
     STATIC INFORMATIONAL COLORS - System Fixed
     ========================================== */
  
  --color-success: #22c55e; /* Green for success states */
  --color-success-hover: #16a34a; /* Darker green for hover */
  --color-success-text: #FFFFFF; /* White text on success */
  --color-success-rgb: 34, 197, 94; /* RGB channels */
  
  --color-error: #ef4444; /* Red for error states */
  --color-error-hover: #dc2626; /* Darker red for hover */
  --color-error-text: #FFFFFF; /* White text on error */
  --color-error-rgb: 239, 68, 68; /* RGB channels */
  
  --color-warning: #f59e0b; /* Yellow for warning states */
  --color-warning-hover: #d97706; /* Darker yellow for hover */
  --color-warning-text: #FFFFFF; /* White text on warning */
  --color-warning-rgb: 245, 158, 11; /* RGB channels */
  
  --color-info: #3b82f6; /* Blue for informational states */
  --color-info-hover: #2563eb; /* Darker blue for hover */
  --color-info-text: #FFFFFF; /* White text on info */
  --color-info-rgb: 59, 130, 246; /* RGB channels */

  /* ==========================================
     STATIC DATA VISUALIZATION COLORS
     ========================================== */
  
  --color-protein: #FB7185; /* Pink/Red for protein macros */
  --color-carbs: #818CF8; /* Blue/Purple for carbohydrates */
  --color-fat: #FBBF24; /* Yellow/Amber for fats */
  --color-fiber: #34D399; /* Green for fiber */
  --color-sugar: #F472B6; /* Pink for sugar */

  /* ==========================================
     STATIC DIFFICULTY COLORS
     ========================================== */
  
  --color-difficulty-beginner: #22c55e; /* Green */
  --color-difficulty-intermediate: #f59e0b; /* Amber */
  --color-difficulty-advanced: #ef4444; /* Red */

  /* ==========================================
     BASE UI COLORS - LIGHT MODE
     ========================================== */
  
  /* Backgrounds */
  --color-background: #ffffff; /* Main page background */
  --color-surface: #f8fafc; /* Card and panel backgrounds */
  --color-surface-secondary: #f1f5f9; /* Secondary surface color */
  --color-surface-hover: #e2e8f0; /* Hover state for surfaces */
  --color-background-rgb: 255, 255, 255; /* RGB channels for background transparency */
  --color-surface-rgb: 248, 250, 252; /* RGB channels for surface transparency */
  --color-surface-secondary-rgb: 241, 245, 249; /* RGB channels for secondary surface transparency */
  
  /* Text Colors */
  --color-text-primary: #1e293b; /* Primary text color */
  --color-text-secondary: #64748b; /* Secondary text color */
  --color-text-tertiary: #94a3b8; /* Tertiary text color */
  --color-text-disabled: #cbd5e1; /* Disabled text color */
  
  /* Border Colors */
  --color-border: #e2e8f0; /* Primary border color */
  --color-border-secondary: #cbd5e1; /* Secondary border color */
  --color-border-focus: var(--color-action); /* Focus state borders */
  --color-border-rgb: 226, 232, 240; /* RGB channels for border transparency */
  --color-border-secondary-rgb: 203, 213, 225; /* RGB channels for secondary border transparency */
  
  /* Interactive States */
  --color-interactive-hover: #f1f5f9; /* Hover state background */
  --color-interactive-active: #e2e8f0; /* Active state background */

  /* ==========================================
     SPACING SYSTEM
     ========================================== */
  
  --spacing-0: 0px;     /* 0rem */
  --spacing-1: 4px;     /* 0.25rem */
  --spacing-2: 8px;     /* 0.5rem */
  --spacing-3: 12px;    /* 0.75rem */
  --spacing-4: 16px;    /* 1rem */
  --spacing-5: 20px;    /* 1.25rem */
  --spacing-6: 24px;    /* 1.5rem */
  --spacing-8: 32px;    /* 2rem */
  --spacing-10: 40px;   /* 2.5rem */
  --spacing-12: 48px;   /* 3rem */
  --spacing-16: 64px;   /* 4rem */
  --spacing-20: 80px;   /* 5rem */
  --spacing-24: 96px;   /* 6rem */
  --spacing-32: 128px;  /* 8rem */
  --spacing-40: 160px;  /* 10rem */
  --spacing-48: 192px;  /* 12rem */
  --spacing-56: 224px;  /* 14rem */
  --spacing-64: 256px;  /* 16rem */

  /* ==========================================
     TYPOGRAPHY SYSTEM
     ========================================== */
  
  /* Font Families */
  --font-family-sans: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-family-serif: 'Georgia', 'Times New Roman', serif;
  --font-family-mono: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', monospace;
  
  /* Font Sizes */
  --font-size-xs: 12px;    /* 0.75rem */
  --font-size-sm: 14px;    /* 0.875rem */
  --font-size-base: 16px;  /* 1rem */
  --font-size-lg: 18px;    /* 1.125rem */
  --font-size-xl: 20px;    /* 1.25rem */
  --font-size-2xl: 24px;   /* 1.5rem */
  --font-size-3xl: 30px;   /* 1.875rem */
  --font-size-4xl: 36px;   /* 2.25rem */
  --font-size-5xl: 48px;   /* 3rem */
  --font-size-6xl: 60px;   /* 3.75rem */
  
  /* Font Weights */
  --font-weight-light: 300;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;
  --font-weight-extrabold: 800;
  
  /* Line Heights */
  --line-height-tight: 1.25;
  --line-height-snug: 1.375;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.625;
  --line-height-loose: 2;

  /* ==========================================
     BORDER RADIUS SYSTEM
     ========================================== */
  
  --radius-none: 0px;
  --radius-sm: 4px;     /* Small radius */
  --radius-base: 8px;   /* Base radius */
  --radius-md: 12px;    /* Medium radius */
  --radius-lg: 16px;    /* Large radius */
  --radius-xl: 20px;    /* Extra large radius */
  --radius-2xl: 24px;   /* 2x large radius */
  --radius-3xl: 32px;   /* 3x large radius */
  --radius-full: 9999px; /* Full circular */

  /* ==========================================
     SHADOW SYSTEM
     ========================================== */
  
  --shadow-xs: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
  --shadow-base: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
  --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
  --shadow-xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  --shadow-2xl: 0 50px 100px -20px rgba(0, 0, 0, 0.25);
  --shadow-inner: inset 0 2px 4px 0 rgba(0, 0, 0, 0.05);

  /* ==========================================
     Z-INDEX SYSTEM
     ========================================== */
  
  --z-index-base: 0;
  --z-index-dropdown: 1000;
  --z-index-sticky: 1020;
  --z-index-fixed: 1030;
  --z-index-modal-backdrop: 1040;
  --z-index-modal: 1050;
  --z-index-popover: 1060;
  --z-index-tooltip: 1070;
  --z-index-toast: 1080;

  /* ==========================================
     ANIMATION SYSTEM
     ========================================== */
  
  --duration-fast: 150ms;
  --duration-base: 200ms;
  --duration-slow: 300ms;
  --duration-slower: 500ms;
  
  --easing-linear: linear;
  --easing-ease: ease;
  --easing-ease-in: ease-in;
  --easing-ease-out: ease-out;
  --easing-ease-in-out: ease-in-out;

  /* ==========================================
     CONTROL DIMENSIONS SYSTEM
     ========================================== */
  
  /* Control Heights */
  --control-height-xs: 28px;  /* Extra small controls */
  --control-height-sm: 32px;  /* Small controls */
  --control-height-md: 36px;  /* Default controls */
  --control-height-lg: 40px;  /* Large controls */
  --control-height-xl: 44px;  /* Extra large controls */
  
  /* Control Widths */
  --control-width-icon: 36px; /* Square icon controls */
  --control-width-icon-sm: 32px; /* Small square icon controls */
  --control-width-icon-lg: 40px; /* Large square icon controls */
  
  /* Dialog and Modal Dimensions */
  --dialog-max-width-sm: 400px;
  --dialog-max-width-md: 500px;
  --dialog-max-width-lg: 600px;
  --dialog-max-width-xl: 800px;
  
  /* Icon Sizes */
  --icon-size-xs: 12px;
  --icon-size-sm: 16px;
  --icon-size-md: 20px;
  --icon-size-lg: 24px;
  --icon-size-xl: 32px;

  /* ==========================================
     SHADCN COMPATIBILITY LAYER
     ========================================== */
  
  /* Base UI Colors */
  --background: var(--color-background);
  --foreground: var(--color-text-primary);
  --card: var(--color-surface);
  --card-foreground: var(--color-text-primary);
  --popover: var(--color-surface);
  --popover-foreground: var(--color-text-primary);
  --primary: var(--color-action);
  --primary-foreground: var(--color-action-text);
  --secondary: var(--color-surface-secondary);
  --secondary-foreground: var(--color-text-primary);
  --muted: var(--color-surface);
  --muted-foreground: var(--color-text-secondary);
  --accent: var(--color-interactive-hover);
  --accent-foreground: var(--color-text-primary);
  --destructive: var(--color-error);
  --destructive-foreground: var(--color-error-text);
  --border: var(--color-border);
  --input: var(--color-border);
  --ring: var(--color-action);
  --radius: var(--radius-base);
  
  /* Chart Colors */
  --chart-1: var(--color-action-rgb);
  --chart-2: var(--color-activity-rgb);
  --chart-3: var(--color-nutrition-rgb);
  --chart-4: var(--color-wellness-rgb);
  --chart-5: var(--color-protein);
}

/* ==========================================
   DARK MODE THEME
   ========================================== */

.dark {
  /* Base UI Colors - Dark Mode */
  --color-background: #0f172a; /* Dark slate background */
  --color-surface: #1e293b; /* Dark slate surface */
  --color-surface-secondary: #334155; /* Lighter dark surface */
  --color-surface-hover: #475569; /* Hover state for dark surfaces */
  
  /* RGB Variants for Dark Mode Transparency Effects */
  --color-background-rgb: 15, 23, 42; /* Dark slate background RGB */
  --color-surface-rgb: 30, 41, 59; /* Dark slate surface RGB */
  --color-surface-secondary-rgb: 51, 65, 85; /* Lighter dark surface RGB */
  --color-border-rgb: 51, 65, 85; /* Dark border RGB */
  --color-border-secondary-rgb: 71, 85, 105; /* Secondary dark border RGB */
  
  /* Text Colors - Dark Mode */
  --color-text-primary: #f8fafc; /* Light text on dark */
  --color-text-secondary: #cbd5e1; /* Secondary light text */
  --color-text-tertiary: #94a3b8; /* Tertiary light text */
  --color-text-disabled: #64748b; /* Disabled text in dark mode */
  
  /* Border Colors - Dark Mode */
  --color-border: #334155; /* Dark border */
  --color-border-secondary: #475569; /* Secondary dark border */
  
  /* Interactive States - Dark Mode */
  --color-interactive-hover: #334155; /* Dark hover state */
  --color-interactive-active: #475569; /* Dark active state */
  
  /* Shadow System - Dark Mode */
  --shadow-xs: 0 1px 2px 0 rgba(0, 0, 0, 0.2);
  --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.3), 0 1px 2px -1px rgba(0, 0, 0, 0.3);
  --shadow-base: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -2px rgba(0, 0, 0, 0.3);
  --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -4px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 8px 10px -6px rgba(0, 0, 0, 0.3);
  --shadow-xl: 0 25px 50px -12px rgba(0, 0, 0, 0.4);
  --shadow-2xl: 0 50px 100px -20px rgba(0, 0, 0, 0.4);
  --shadow-inner: inset 0 2px 4px 0 rgba(0, 0, 0, 0.2);
  
  /* Shadcn Compatibility - Dark Mode */
  --background: var(--color-background);
  --foreground: var(--color-text-primary);
  --card: var(--color-surface);
  --card-foreground: var(--color-text-primary);
  --popover: var(--color-surface);
  --popover-foreground: var(--color-text-primary);
  --secondary: var(--color-surface-secondary);
  --secondary-foreground: var(--color-text-primary);
  --muted: var(--color-surface);
  --muted-foreground: var(--color-text-secondary);
  --accent: var(--color-interactive-hover);
  --accent-foreground: var(--color-text-primary);
  --border: var(--color-border);
  --input: var(--color-border);
}

/* ==========================================
   UTILITY CLASSES
   ========================================== */

/* Text utilities */
.text-primary { color: var(--color-text-primary); }
.text-secondary { color: var(--color-text-secondary); }
.text-tertiary { color: var(--color-text-tertiary); }
.text-disabled { color: var(--color-text-disabled); }

/* Background utilities */
.bg-primary { background-color: var(--color-background); }
.bg-surface { background-color: var(--color-surface); }
.bg-surface-secondary { background-color: var(--color-surface-secondary); }

/* Border utilities */
.border-primary { border-color: var(--color-border); }
.border-secondary { border-color: var(--color-border-secondary); }

/* Semantic color utilities */
.text-action { color: var(--color-action); }
.bg-action { background-color: var(--color-action); color: var(--color-action-text); }
.text-activity { color: var(--color-activity); }
.bg-activity { background-color: var(--color-activity); color: var(--color-activity-text); }
.text-nutrition { color: var(--color-nutrition); }
.bg-nutrition { background-color: var(--color-nutrition); color: var(--color-nutrition-text); }
.text-wellness { color: var(--color-wellness); }
.bg-wellness { background-color: var(--color-wellness); color: var(--color-wellness-text); }

/* Status color utilities */
.text-success { color: var(--color-success); }
.bg-success { background-color: var(--color-success); color: var(--color-success-text); }
.text-error { color: var(--color-error); }
.bg-error { background-color: var(--color-error); color: var(--color-error-text); }
.text-warning { color: var(--color-warning); }
.bg-warning { background-color: var(--color-warning); color: var(--color-warning-text); }

/* ==========================================
   COMPONENT FOUNDATION CLASSES
   ========================================== */

/* Base interactive element */
.interactive-base {
  transition: all var(--duration-base) var(--easing-ease-out);
  cursor: pointer;
}

.interactive-base:hover {
  transform: translateY(-1px);
}

.interactive-base:active {
  transform: translateY(0);
}

/* Card foundation */
.card-base {
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
  color: var(--color-text-primary);
}

.card-header {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-2);
  padding: var(--spacing-6);
}

.card-title {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  color: var(--color-text-primary);
}

.card-description {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  line-height: var(--line-height-relaxed);
}

.card-content {
  padding: var(--spacing-6);
  padding-top: 0;
}

.card-footer {
  display: flex;
  align-items: center;
  padding: var(--spacing-6);
  padding-top: 0;
}

/* Button foundation */
.button-base {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-2);
  padding: var(--spacing-3) var(--spacing-4);
  border-radius: var(--radius-base);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  transition: all var(--duration-base) var(--easing-ease-out);
  cursor: pointer;
  border: none;
  height: var(--control-height-md);
  font-family: var(--font-family-sans);
  white-space: nowrap;
  outline: none;
  position: relative;
}

/* Button size variants */
.button-sm {
  height: var(--control-height-sm);
  padding: var(--spacing-2) var(--spacing-3);
  font-size: var(--font-size-xs);
}

.button-lg {
  height: var(--control-height-lg);
  padding: var(--spacing-3) var(--spacing-8);
}

.button-icon {
  height: var(--control-width-icon);
  width: var(--control-width-icon);
  min-width: var(--control-width-icon);
  padding: var(--spacing-2);
}

/* Button variant styles */
.button-default {
  background-color: var(--color-action);
  color: var(--color-action-text);
  box-shadow: var(--shadow-sm);
}

.button-default:hover {
  background-color: var(--color-action-hover);
}

.button-default:focus-visible {
  box-shadow: 0 0 0 2px var(--color-action);
}

.button-destructive {
  background-color: var(--color-error);
  color: var(--color-error-text);
  box-shadow: var(--shadow-sm);
}

.button-destructive:hover {
  background-color: var(--color-error-hover);
}

.button-destructive:focus-visible {
  box-shadow: 0 0 0 2px var(--color-error);
}

.button-outline {
  background-color: var(--color-surface);
  color: var(--color-text-primary);
  border: 1px solid var(--color-border);
  box-shadow: var(--shadow-sm);
}

.button-outline:hover {
  background-color: rgba(var(--color-action-rgb), 0.1);
  color: var(--color-action);
}

.button-outline:focus-visible {
  box-shadow: 0 0 0 2px var(--color-action);
}

.button-secondary {
  background-color: var(--color-surface);
  color: var(--color-text-primary);
  border: 1px solid var(--color-border);
  box-shadow: var(--shadow-sm);
}

.button-secondary:hover {
  background-color: rgba(var(--color-border-secondary), 0.5);
}

.button-secondary:focus-visible {
  box-shadow: 0 0 0 2px var(--color-action);
}

.button-ghost {
  background-color: transparent;
  color: var(--color-text-primary);
  box-shadow: none;
}

.button-ghost:hover {
  background-color: rgba(var(--color-action-rgb), 0.1);
  color: var(--color-action);
}

.button-ghost:focus-visible {
  box-shadow: 0 0 0 2px var(--color-action);
}

.button-link {
  background-color: transparent;
  color: var(--color-action);
  text-decoration: underline;
  text-underline-offset: 4px;
  box-shadow: none;
}

.button-link:hover {
  color: var(--color-action-hover);
}

.button-link:focus-visible {
  box-shadow: 0 0 0 2px var(--color-action);
}

/* Button disabled state */
.button-base:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  pointer-events: none;
}

/* Input foundation */
.input-base {
  display: flex;
  width: 100%;
  padding: var(--spacing-3) var(--spacing-4);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  background-color: var(--color-background);
  color: var(--color-text-primary);
  font-size: var(--font-size-sm);
  transition: all var(--duration-base) var(--easing-ease-out);
  outline: none;
  height: var(--control-height-lg);
}

.input-base:focus {
  border-color: var(--color-border-focus);
  box-shadow: 0 0 0 3px rgba(var(--color-action-rgb), 0.1);
}

.input-base:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

.input-base::placeholder {
  color: var(--color-text-tertiary);
}

/* Dialog close icon sizing */
.dialog-close svg {
  width: var(--icon-size-sm);
  height: var(--icon-size-sm);
}

/* Badge foundation */
.badge-base {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  padding: var(--spacing-1) var(--spacing-2);
  border-radius: var(--radius-full);
  border: 1px solid transparent;
  transition: all var(--duration-base) var(--easing-ease-out);
  white-space: nowrap;
}

.badge-default {
  background-color: var(--color-action);
  color: var(--color-action-text);
}

.badge-secondary {
  background-color: var(--color-surface-secondary);
  color: var(--color-text-primary);
  border-color: var(--color-border);
}

.badge-destructive {
  background-color: var(--color-error);
  color: var(--color-error-text);
}

.badge-outline {
  background-color: transparent;
  color: var(--color-text-primary);
  border-color: var(--color-border);
}

.badge-success {
  background-color: var(--color-success);
  color: var(--color-success-text);
}

.badge-warning {
  background-color: var(--color-warning);
  color: var(--color-warning-text);
}

.badge-info {
  background-color: var(--color-info);
  color: var(--color-info-text);
}

/* Tabs foundation */
.tabs-list {
  display: inline-flex;
  height: var(--control-height-md);
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-lg);
  background-color: var(--color-surface);
  padding: var(--spacing-1);
  color: var(--color-text-secondary);
  border: 1px solid var(--color-border);
}

.tabs-trigger {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
  border-radius: var(--radius-base);
  padding: var(--spacing-3);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  border: none;
  background-color: transparent;
  color: var(--color-text-secondary);
  transition: all var(--duration-base) var(--easing-ease-out);
  outline: none;
  position: relative;
}

.tabs-trigger[data-state="active"] {
  background-color: var(--color-background);
  color: var(--color-text-primary);
  box-shadow: var(--shadow-sm);
}

.tabs-trigger:focus-visible {
  box-shadow: 0 0 0 2px var(--color-action);
}

.tabs-trigger:disabled {
  pointer-events: none;
  opacity: 0.5;
}

.tabs-content {
  margin-top: var(--spacing-2);
  outline: none;
}

.tabs-content:focus-visible {
  box-shadow: 0 0 0 2px var(--color-action);
}

/* Dialog foundation */
.dialog-overlay {
  position: fixed;
  inset: 0;
  z-index: var(--z-index-modal-backdrop);
  background-color: rgba(0, 0, 0, 0.8);
  transition: opacity var(--duration-base) var(--easing-ease-out);
}

.dialog-content {
  position: fixed;
  left: 50%;
  top: 50%;
  z-index: var(--z-index-modal);
  display: grid;
  width: 100%;
  max-width: var(--dialog-max-width-md);
  transform: translate(-50%, -50%);
  gap: var(--spacing-4);
  border: 1px solid var(--color-border);
  background-color: var(--color-background);
  color: var(--color-text-primary);
  padding: var(--spacing-6);
  box-shadow: var(--shadow-lg);
  border-radius: var(--radius-lg);
  transition: all var(--duration-base) var(--easing-ease-out);
}

.dialog-close {
  position: absolute;
  right: var(--spacing-4);
  top: var(--spacing-4);
  border-radius: var(--radius-sm);
  opacity: 0.7;
  background-color: transparent;
  border: none;
  padding: var(--spacing-1);
  cursor: pointer;
  transition: opacity var(--duration-base) var(--easing-ease-out);
  color: var(--color-text-secondary);
  outline: none;
}

.dialog-close:hover {
  opacity: 1;
}

.dialog-close:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px var(--color-action);
}

.dialog-header {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-2);
  text-align: center;
}

.dialog-footer {
  display: flex;
  flex-direction: column-reverse;
  gap: var(--spacing-2);
}

@media (min-width: 640px) {
  .dialog-footer {
    flex-direction: row;
    justify-content: flex-end;
  }
}

/* Toast foundation */
.toast-viewport {
  position: fixed;
  top: 0;
  z-index: var(--z-index-toast);
  display: flex;
  max-height: 100vh;
  width: 100%;
  flex-direction: column-reverse;
  padding: var(--spacing-4);
}

.toast-base {
  position: relative;
  display: flex;
  width: 100%;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing-2);
  overflow: hidden;
  border-radius: var(--radius-base);
  border: 1px solid var(--color-border);
  padding: var(--spacing-4);
  padding-right: var(--spacing-6);
  box-shadow: var(--shadow-lg);
  transition: all var(--duration-base) var(--easing-ease-out);
  pointer-events: auto;
}

.toast-default {
  background-color: var(--color-background);
  color: var(--color-text-primary);
  border-color: var(--color-border);
}

.toast-destructive {
  background-color: var(--color-error);
  color: var(--color-error-text);
  border-color: var(--color-error);
}

.toast-action {
  display: inline-flex;
  height: var(--control-height-sm);
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-base);
  border: 1px solid var(--color-border);
  background-color: transparent;
  padding: 0 var(--spacing-3);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
  cursor: pointer;
  transition: all var(--duration-base) var(--easing-ease-out);
  outline: none;
  flex-shrink: 0;
}

.toast-action:hover {
  background-color: var(--color-surface);
}

.toast-action:focus-visible {
  box-shadow: 0 0 0 2px var(--color-action);
}

.toast-action:disabled {
  pointer-events: none;
  opacity: 0.5;
}

.toast-close {
  position: absolute;
  right: var(--spacing-1);
  top: var(--spacing-1);
  border-radius: var(--radius-sm);
  padding: var(--spacing-1);
  color: var(--color-text-secondary);
  background-color: transparent;
  border: none;
  cursor: pointer;
  opacity: 0;
  transition: opacity var(--duration-base) var(--easing-ease-out);
  outline: none;
}

.toast-base:hover .toast-close {
  opacity: 1;
}

.toast-close:hover {
  opacity: 1;
  color: var(--color-text-primary);
}

.toast-close:focus-visible {
  opacity: 1;
  box-shadow: 0 0 0 2px var(--color-action);
}

.toast-title {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: inherit;
}

.toast-description {
  font-size: var(--font-size-sm);
  opacity: 0.9;
  color: inherit;
}

.toast-container {
  display: grid;
  gap: var(--spacing-1);
}

/* Screen reader only utility */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Dialog title and description styles */
.dialog-title {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  letter-spacing: -0.025em;
  color: var(--color-text-primary);
}

.dialog-description {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  line-height: var(--line-height-relaxed);
}

/* ==========================================
   NAVIGATION FOUNDATION CLASSES
   ========================================== */

/* Bottom navigation container */
.nav-bottom {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  border-top: 1px solid rgba(var(--color-border-rgb), 0.5);
  background-color: rgba(var(--color-surface-rgb), 0.8);
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px); /* Safari support */
  box-shadow: var(--shadow-2xl);
  z-index: var(--z-index-fixed);
}

/* Navigation grid container */
.nav-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: var(--spacing-2);
  padding: var(--spacing-4);
  max-width: 448px; /* max-w-md equivalent */
  margin: 0 auto;
}

/* Navigation item base */
.nav-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--spacing-3);
  border-radius: var(--radius-2xl);
  transition: all var(--duration-base) var(--easing-ease-out);
  position: relative;
  cursor: pointer;
  text-decoration: none;
  color: inherit;
}

/* Navigation item hover effect */
.nav-item:hover {
  transform: scale(1.05);
}

/* Navigation item active effect */
.nav-item:active {
  transform: scale(0.95);
}

/* Active navigation item */
.nav-item-active {
  color: var(--color-action);
  background: linear-gradient(135deg, rgba(var(--color-action-rgb), 0.2), rgba(var(--color-action-rgb), 0.2));
  box-shadow: 0 8px 25px -5px rgba(var(--color-action-rgb), 0.25);
  border: 1px solid rgba(var(--color-action-rgb), 0.3);
}

/* Inactive navigation item */
.nav-item-inactive {
  color: var(--color-text-secondary);
}

/* Inactive navigation item hover */
.nav-item-inactive:hover {
  color: var(--color-text-primary);
  background-color: rgba(var(--color-action-rgb), 0.1);
  box-shadow: var(--shadow-sm);
}

/* Navigation icon */
.nav-icon {
  width: var(--icon-size-md);
  height: var(--icon-size-md);
  margin-bottom: var(--spacing-2);
  transition: all var(--duration-base) var(--easing-ease-out);
}

/* Active navigation icon */
.nav-icon-active {
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
}

/* Navigation label */
.nav-label {
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  letter-spacing: 0.025em; /* tracking-wide equivalent */
  transition: all var(--duration-base) var(--easing-ease-out);
}

/* Active navigation label */
.nav-label-active {
  font-weight: var(--font-weight-semibold);
  color: var(--color-action);
}

/* Navigation active indicator dot */
.nav-indicator {
  position: absolute;
  top: -4px;
  right: -4px;
  width: var(--spacing-2);
  height: var(--spacing-2);
  background: linear-gradient(135deg, var(--color-action), var(--color-action));
  border-radius: var(--radius-full);
  box-shadow: var(--shadow-sm);
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Pulse animation for active indicator */
@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

/* ==========================================
   PAGE FOUNDATION CLASSES
   ========================================== */

/* Page containers and layouts */
.page-container {
  min-height: 100vh;
  background-color: var(--color-background);
  padding: var(--spacing-4);
  padding-bottom: var(--spacing-24);
}

.page-header {
  text-align: center;
  padding-top: var(--spacing-8);
  margin-bottom: var(--spacing-6);
}

.page-title {
  font-size: var(--font-size-3xl);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
  margin-bottom: var(--spacing-2);
}

.page-subtitle {
  font-size: var(--font-size-lg);
  color: var(--color-text-secondary);
  max-width: 48rem;
  margin: 0 auto;
}

.page-back-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-4);
  padding-top: var(--spacing-8);
  margin-bottom: var(--spacing-6);
}

.page-back-button {
  padding: var(--spacing-2);
  border-radius: var(--radius-lg);
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  color: var(--color-text-secondary);
  transition: all var(--duration-base) var(--easing-ease-out);
  cursor: pointer;
}

.page-back-button:hover {
  background-color: var(--color-interactive-hover);
  color: var(--color-text-primary);
}

.page-back-title {
  font-size: var(--font-size-2xl);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
}

/* Section utilities */
.section-spacing {
  margin-bottom: var(--spacing-6);
}

.section-container {
  margin: 0 auto;
  max-width: 72rem;
  padding: 0 var(--spacing-4);
}

/* Grid systems for responsive layouts */
.grid-2 {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--spacing-4);
}

.grid-3 {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--spacing-4);
}

.grid-4 {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--spacing-4);
}

/* Responsive grid variants */
@media (min-width: 768px) {
  .grid-md-2 {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .grid-md-3 {
    grid-template-columns: repeat(3, 1fr);
  }
  
  .grid-md-4 {
    grid-template-columns: repeat(4, 1fr);
  }
}

@media (max-width: 767px) {
  .grid-2, .grid-3, .grid-4 {
    grid-template-columns: 1fr;
  }
}

/* ==========================================
   ENHANCED CARD FOUNDATION CLASSES
   ========================================== */

/* Premium glass card with backdrop blur effect */
.card-glass {
  background: linear-gradient(135deg, rgba(var(--color-surface-rgb), 0.9), rgba(var(--color-surface-rgb), 0.8));
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  backdrop-filter: blur(12px);
  box-shadow: var(--shadow-2xl);
  color: var(--color-text-primary);
}

/* Semantic gradient card variants */
.card-action {
  background: linear-gradient(135deg, rgba(var(--color-action-rgb), 0.6), rgba(var(--color-action-rgb), 0.7));
  border: 1px solid rgba(var(--color-action-rgb), 0.5);
  border-radius: var(--radius-lg);
  box-shadow: 0 10px 15px -3px rgba(var(--color-action-rgb), 0.2);
  color: var(--color-action-text);
}

.card-activity {
  background: linear-gradient(135deg, rgba(var(--color-activity-rgb), 0.6), rgba(var(--color-activity-rgb), 0.7));
  border: 1px solid rgba(var(--color-activity-rgb), 0.5);
  border-radius: var(--radius-lg);
  box-shadow: 0 10px 15px -3px rgba(var(--color-activity-rgb), 0.2);
  color: var(--color-activity-text);
}

.card-nutrition {
  background: linear-gradient(135deg, rgba(var(--color-nutrition-rgb), 0.6), rgba(var(--color-nutrition-rgb), 0.7));
  border: 1px solid rgba(var(--color-nutrition-rgb), 0.5);
  border-radius: var(--radius-lg);
  box-shadow: 0 10px 15px -3px rgba(var(--color-nutrition-rgb), 0.2);
  color: var(--color-nutrition-text);
}

.card-wellness {
  background: linear-gradient(135deg, rgba(var(--color-wellness-rgb), 0.6), rgba(var(--color-wellness-rgb), 0.7));
  border: 1px solid rgba(var(--color-wellness-rgb), 0.5);
  border-radius: var(--radius-lg);
  box-shadow: 0 10px 15px -3px rgba(var(--color-wellness-rgb), 0.2);
  color: var(--color-wellness-text);
}

.card-success {
  background: linear-gradient(135deg, rgba(var(--color-success-rgb), 0.6), rgba(var(--color-success-rgb), 0.7));
  border: 1px solid rgba(var(--color-success-rgb), 0.5);
  border-radius: var(--radius-lg);
  box-shadow: 0 10px 15px -3px rgba(var(--color-success-rgb), 0.2);
  color: var(--color-success-text);
}

.card-warning {
  background: linear-gradient(135deg, rgba(var(--color-warning-rgb), 0.6), rgba(var(--color-warning-rgb), 0.7));
  border: 1px solid rgba(var(--color-warning-rgb), 0.5);
  border-radius: var(--radius-lg);
  box-shadow: 0 10px 15px -3px rgba(var(--color-warning-rgb), 0.2);
  color: var(--color-warning-text);
}

.card-error {
  background: linear-gradient(135deg, rgba(var(--color-error-rgb), 0.6), rgba(var(--color-error-rgb), 0.7));
  border: 1px solid rgba(var(--color-error-rgb), 0.5);
  border-radius: var(--radius-lg);
  box-shadow: 0 10px 15px -3px rgba(var(--color-error-rgb), 0.2);
  color: var(--color-error-text);
}

/* ==========================================
   ICON BADGE FOUNDATION CLASSES
   ========================================== */

/* Base icon badge structure */
.icon-badge {
  padding: var(--spacing-3);
  border-radius: var(--radius-2xl);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--duration-base) var(--easing-ease-out);
}

.icon-badge-sm {
  padding: var(--spacing-2);
  border-radius: var(--radius-xl);
}

.icon-badge-lg {
  padding: var(--spacing-4);
  border-radius: var(--radius-2xl);
}

/* Semantic icon badge variants */
.icon-badge-action {
  background: linear-gradient(135deg, rgba(var(--color-action-rgb), 0.2), rgba(var(--color-action-rgb), 0.1));
  border: 1px solid rgba(var(--color-action-rgb), 0.2);
}

.icon-badge-activity {
  background: linear-gradient(135deg, rgba(var(--color-activity-rgb), 0.2), rgba(var(--color-activity-rgb), 0.1));
  border: 1px solid rgba(var(--color-activity-rgb), 0.2);
}

.icon-badge-nutrition {
  background: linear-gradient(135deg, rgba(var(--color-nutrition-rgb), 0.2), rgba(var(--color-nutrition-rgb), 0.1));
  border: 1px solid rgba(var(--color-nutrition-rgb), 0.2);
}

.icon-badge-wellness {
  background: linear-gradient(135deg, rgba(var(--color-wellness-rgb), 0.2), rgba(var(--color-wellness-rgb), 0.1));
  border: 1px solid rgba(var(--color-wellness-rgb), 0.2);
}

.icon-badge-success {
  background: linear-gradient(135deg, rgba(var(--color-success-rgb), 0.2), rgba(var(--color-success-rgb), 0.1));
  border: 1px solid rgba(var(--color-success-rgb), 0.2);
}

.icon-badge-warning {
  background: linear-gradient(135deg, rgba(var(--color-warning-rgb), 0.2), rgba(var(--color-warning-rgb), 0.1));
  border: 1px solid rgba(var(--color-warning-rgb), 0.2);
}

.icon-badge-error {
  background: linear-gradient(135deg, rgba(var(--color-error-rgb), 0.2), rgba(var(--color-error-rgb), 0.1));
  border: 1px solid rgba(var(--color-error-rgb), 0.2);
}

.icon-badge-info {
  background: linear-gradient(135deg, rgba(var(--color-info-rgb), 0.2), rgba(var(--color-info-rgb), 0.1));
  border: 1px solid rgba(var(--color-info-rgb), 0.2);
}

/* ==========================================
   CONTENT LAYOUT UTILITIES
   ========================================== */

/* Flex layouts */
.flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

.flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.flex-start {
  display: flex;
  align-items: center;
  justify-content: flex-start;
}

.flex-col-center {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.flex-col-start {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

/* Spacing utilities */
.space-y-2 > * + * {
  margin-top: var(--spacing-2);
}

.space-y-3 > * + * {
  margin-top: var(--spacing-3);
}

.space-y-4 > * + * {
  margin-top: var(--spacing-4);
}

.space-y-6 > * + * {
  margin-top: var(--spacing-6);
}

.space-y-8 > * + * {
  margin-top: var(--spacing-8);
}

.gap-2 {
  gap: var(--spacing-2);
}

.gap-3 {
  gap: var(--spacing-3);
}

.gap-4 {
  gap: var(--spacing-4);
}

.gap-6 {
  gap: var(--spacing-6);
}

/* Text alignment utilities */
.text-center {
  text-align: center;
}

.text-left {
  text-align: left;
}

.text-right {
  text-align: right;
}

/* Max width utilities */
.max-w-md {
  max-width: 28rem;
}

.max-w-lg {
  max-width: 32rem;
}

.max-w-xl {
  max-width: 36rem;
}

.max-w-2xl {
  max-width: 42rem;
}

.max-w-4xl {
  max-width: 56rem;
}

/* Margin auto for centering */
.mx-auto {
  margin-left: auto;
  margin-right: auto;
}

/* ==========================================
   INTERACTIVE ELEMENT FOUNDATIONS
   ========================================== */

/* Action items and clickable cards */
.action-item {
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  padding: var(--spacing-4);
  transition: all var(--duration-base) var(--easing-ease-out);
  cursor: pointer;
  color: var(--color-text-primary);
}

.action-item:hover {
  background-color: var(--color-interactive-hover);
  border-color: var(--color-action);
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

.action-item:active {
  transform: translateY(0);
}

/* Status indicators */
.status-indicator {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-2);
  padding: var(--spacing-2) var(--spacing-3);
  border-radius: var(--radius-full);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
}

.status-success {
  background-color: rgba(var(--color-success-rgb), 0.1);
  color: var(--color-success);
  border: 1px solid rgba(var(--color-success-rgb), 0.2);
}

.status-warning {
  background-color: rgba(var(--color-warning-rgb), 0.1);
  color: var(--color-warning);
  border: 1px solid rgba(var(--color-warning-rgb), 0.2);
}

.status-error {
  background-color: rgba(var(--color-error-rgb), 0.1);
  color: var(--color-error);
  border: 1px solid rgba(var(--color-error-rgb), 0.2);
}

/* ==========================================
   PERFORMANCE OPTIMIZATION GUARDS
   ========================================== */

/* Performance optimization for reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .card-action,
  .card-activity, 
  .card-nutrition,
  .card-wellness,
  .card-glass,
  .card-success,
  .card-warning,
  .card-error {
    transition: none !important;
    animation: none !important;
  }
  
  .interactive-base,
  .nav-item,
  .action-item {
    transition: none !important;
    animation: none !important;
  }
  
  .nav-indicator {
    animation: none !important;
  }
  
  /* Disable all transitions and animations for accessibility */
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Performance optimization for reduced transparency preference */
@media (prefers-reduced-transparency: reduce) {
  .card-action,
  .card-activity,
  .card-nutrition, 
  .card-wellness,
  .card-glass,
  .card-success,
  .card-warning,
  .card-error {
    backdrop-filter: none !important;
    background: var(--color-surface) !important;
    border: 1px solid var(--color-border) !important;
  }
  
  /* Remove transparency from icon badges */
  .icon-badge-action,
  .icon-badge-activity,
  .icon-badge-nutrition,
  .icon-badge-wellness,
  .icon-badge-success,
  .icon-badge-warning,
  .icon-badge-error,
  .icon-badge-info {
    background: var(--color-surface-secondary) !important;
    border: 1px solid var(--color-border) !important;
  }
}

/* Low-performance device optimization for reduced blur effects */
@media (max-resolution: 1dppx) {
  .card-glass {
    backdrop-filter: blur(4px) !important; /* Reduce blur intensity for low-end devices */
  }
  
  .card-action,
  .card-activity,
  .card-nutrition,
  .card-wellness,
  .card-success,
  .card-warning,
  .card-error {
    box-shadow: var(--shadow-sm) !important; /* Reduce shadow complexity */
  }
}

/* High contrast mode optimization */
@media (prefers-contrast: high) {
  .card-action,
  .card-activity,
  .card-nutrition,
  .card-wellness,
  .card-glass,
  .card-success,
  .card-warning,
  .card-error {
    border-width: 2px !important;
    box-shadow: none !important;
  }
  
  .nav-item-active {
    border-width: 2px !important;
    box-shadow: none !important;
  }
}

/* ==========================================
   END OF MASTER THEME FILE
   ========================================== */